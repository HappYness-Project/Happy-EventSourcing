@page "/todos"
@inherits TodoBase
@using HP.Application.DTOs
@using HP.Application.Queries.Todos
@inject MediatR.IMediator _mediator

<h3>Display All Todos</h3>
<div class="w-100">
    <h3 class="p-2 text-left">BasicInfo Todos</h3>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>TODO ID</th>
                <th>User ID</th>
                <th>Title</th>
                <th>Options</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var t in Todos)
            {
                <tr>
                    <td style="text-underline-position:below; cursor:pointer; color:blue" @onclick="@(() => OnClickViewDetails(@TodoDetailsFromTodoSearch.TodoId))">@t.TodoId</td>
                    <td>@t.UserId</td>
                    <td>@t.TodoTitle</td>
                    <td>
                        <button @onclick="@(() => OnClickViewDetails(@t.TodoId))">View Details</button>
                        <button @onclick="@(() => OnClickRemoveTodo(@t.TodoId))">Delete</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>


    <div class="text-center bg-blue-100">
    <input class="border-4 w-1/3 rounded m-6 p-6 h-8
               border-blue-300" @bind-value="TodoIdInput"
                @bind-value:event="oninput" placeholder="Search by Todo ID" @onkeyup="@(() => SearchChanged(TodoIdInput))" />
    </div>

    @if (TodoDetailsFromTodoSearch is null)
    {
        <p>Cannot find any Todo Details.</p>
    }
    else
    {
        <div class="p-2 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3">
            <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>TODO ID</th>
                            <th>User ID</th>
                            <th>Title</th>
                            <th>Todo Status</th>
                            <th>Button click</th>

                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td style="text-underline-position:below; cursor:pointer; color:blue" @onclick="@(() => OnClickViewDetails(@TodoDetailsFromTodoSearch.TodoId))">@TodoDetailsFromTodoSearch.TodoId</td>
                            <td>@TodoDetailsFromTodoSearch.UserId</td>
                            <td>@TodoDetailsFromTodoSearch.TodoTitle</td>
                            <td>@TodoDetailsFromTodoSearch.TodoStatus</td>
                            <td>
                                <button @onclick="@(() => OnClickViewDetails(@TodoDetailsFromTodoSearch.TodoId))">View Details</button>
                                <button @onclick="@(() => OnClickRemoveTodo(@TodoDetailsFromTodoSearch.TodoId))">Delete</button>
                                <button type="button" class="btn btn-danger btn-sm" @onclick="()=> OpenDeleteDialog()">Delete Testing</button>
                            </td>
                        </tr>
            
                    </tbody>
            </table>
        </div>
    }
   
    <div class="todocreate">
        <button class="sign-button btn btn-primary" @onclick="@OnClickGoToCreateTodo">Create new Todo</button>
    </div>
</div>

@if(DeleteDialogOpen)
{
    <DeleteTodoDialog Title="Are you sure?" Text="Do you want to delete this entry?" OnClose="@OnDeleteDialogClose"></DeleteTodoDialog>
}


@*<div>
    @foreach(TodoBasicInfoDto t in Todos)
    {
        <TodoElement TodoBasicInfoDto="t"></TodoElement>
    }
</div>*@
